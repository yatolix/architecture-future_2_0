# Разделение на домены

В диаграмме контейнеров целевой архитектуры через год `Task1\future_2_0_c4_containers.drawio` уже даны верхнеуровневые домены. Но они лишь задают общую структуру системы.

В текущем документе описано более детальное разделение доменов, с обоснованиями.

## Сразу перечислим все домены и поддомены:

* **Медицина**
  * **Взаимодействие с пациентами** - профили, согласия, коммуникации
  * **Медицинская деятельность** - приёмы, диагнозы, назначения
  * **Анализы и исследования** - снимки, лабораторные результаты
* **Финтех**
  * **Банковские продукты** - кредиты, счета, платежи
  * **Скоринг, риски и антифрод** - оценка кредитоспособности и выявление мошшенических действий
  * **Страхование** - ДМС и пр.
* **Фармацевтика**
  * **Управление лекарствами**
  * **Взаимодействие с внешними партнёрами** (аптеки и клиники)
  * **Контроль качества**
* **Производство оборудования**
  * **Производство** - управление жизненным циклом, от комплектующих до готовых продуктов
  * **Техническое обслуживание** - ремонт, настройка оборудования, учёт запчастей
* **ИИ-сервисы** (управление и обучение моделей, публикация обезличенных результатов)
* **MDM** (мастер-данные)
  * **Единые справочники** - услуги, оборудование клиник, пациенты
  * **Сотрудники**
* **Платформа данных и внутренняя интеграция**
  * **Портал самообслуживаниия** - UI, Lakehouse, Dremio, DataHub
  * **Интеграционный слой** - Kafka, Airflow

### Прежде чем перейти к детальному обоснованию, необходимо подсветить несколько важных моментов по разделению доменов:

1. Условно можно выделить чисто **бизнесовые** домены - **Медицина**, **Финтех**, **Фармацевтика**, **Производство оборудования**.
2. Также отдельно выделяем **поддерживающие** домены - **MDM** и **Платформа Данных с внутренними интеграциями**.
3. **ИИ-сервисы** - пограничный домен **между бизнесом и техникой**.
4. Выделены **поддомены** с целью создания корректной модульности внутри каждого основного домена.

## Обоснование разделения доменов

### Основные бизнес-домены

Разделение на основные бизнесовые домены (**Медицина**, **Финтех**, **Фармацевтика**, **Производство оборудования**) обусловлено разными направлениями деятельности компании. Каждое направление должно управляться независимо от других. Такое разделение также позволяет добавлять новые направления деятельности в качестве доменов - не ломая при этом существующую архитектуру. Это закладывает основу для масштабирования бизнеса через новые приобретения и быстрого вывода продуктов на рынок.

Кроме независимого управления важным приемуществом разделения основных доменов является изоляция чувствительных данных: медицинские PII данные отделены от финансовых например. Это также упрощает контроль и аудит. В том числе можно выделить разные регуляторные требования в законодательстве применимо к финансовым операциям и работе с медицинскими данными.

Ну и помимо уже перечиленного, верхнеуровневое разделение по направлениям бизнеса даёт возможность продуктовым командам нести ответственность за качество данных, предоставляемых через Data Products в аналитический контур.

#### Бизнесовые поддомены

##### Медицина

В основном домене Медицина мы выделяем три поддомена:

* **Взаимодействие с пациентами**
* **Медицинская деятельность**
* **Анализы и исследования**

Обоснований по разделению этих трёх поддоменов несколько, в частности у них разные темпы изменения. Например, анкета пациента заполняется один раз и потом редко в ней что-то меняется координальным образом. А у поддомена Медицинская деятельность темп изменений очень высокий, потому что каждый день идут приёмы, появляются диагнозы, назначения, рецепты и т.д. Тут также сразу можно подсветить характер нагрузки на сервисы. По части данных о пациентах мы говорим в основном о чтении. А в медицинской деятельности преобладает интенсивная запись и обновление.

Отдельным важным аспектом разделения поддоменов являются требования к безопасности данных. Данные связанные непосредственно с пациентами являются персональными и способы обращения с ними регулируются отдельным ФЗ. То же самое можно сказать и про чувствительные медицинские данные исследований.

Немаловажным обоснованием выделения поддомена Анализов и исследований является необходимость доступности этих данных для ИИ-Сервисов. Находясь в отдельном домене можно регулировать доступ к данным не затрагивая при этом другие соседние медицинские поддомены.

##### Финтех

В основном домене Финтех мы выделяем три поддомена:

* **Банковские продукты**
* **Скоринг, риски и антифрод**
* **Страхование**

Банковские продукты как правило обладают жесткими регуляторными требованиями и реализуются в специализированных т.н. core banking системах, которые никак не смешиваются с упралением риск-моделями и страховками. Изменения в банковских продуктах должны происходить независимо от скоринговых моделей. Для банковских продуктов как правило характерны высокая доступность и отказоустойчивость т.к. темп появления транзакционных данных оцень высок. Для Скоринга и рисков эти архитектурные характеристики не являются столь ключевыми. Скоринг - это скорее про отдельную экспертизу, которая требует внимательного управления. А результаты скоринга используются как банковскимип продуктами, так и в Страховании. Отдельно про Страхование стоит подсветить смешанный характер нагрузки. Изменение продуктов происходит относительно редко. А операционная нагрузка (создание договоров и т.п.) - как минимум средняя. Также Страхование должно отдельно интегрироваться с Медициной для обмена данными об оказанных услугах, диагнозах и т.п. Интеграция не должна влиять на банковские продукты и скоринг, поэтому хорошо если Страхование будет отдельным поддоменом.

##### Фармацевтика

В основном домене Фармацевтика мы выделяем три поддомена:

* **Управление лекарствами**
* **Взаимодействие с внешними партнёрами**
* **Контроль качества**

Мы пока точно не знаем какое внутреннее разделение будет у покупаемой фармацевтической компании. Но выделяем основные виды деятельности внутри процесса производства препаратов. В поддомене Управление лекарствами мы фокусируемся на деталях производства лекарств, их лицензировании, лабораторных исследованиях и т.п.

Взаимодействие с внешними партнёрами происходит независимо от производства препаратов. Тут мы налаживаем интеграции с аптеками и другими заинтересованными органзациями.

И также выделяем Контроль качества как независимую службу которая следит за выполнением всех внутренних и законодательных стандартов.

##### Производство оборудования

В основном домене Производство оборудования мы выделяем два поддомена:

* **Производство**
* **Техническое обслуживание**

Поддомены практически никак не пересекаются и управляются отдельно. Они про разные стадии жизненного цикла оборудования. На производстве важен подбор коплектующих, организация процесса сборки оборудования, эффективность рабочих процессов для поддержания заданных темпов производства.

Техническое обслуживание в свою очередь больше воспринимается как расходная часть бизнеса, где компания готова брать на себя гарантийные обязательства и поддерживать свою репутацию ответственного за качества производителя, который заботится не только о том как реализовать свою продукцию, но и о том чтобы продукция продолжала исправно функционировать. Для технического обслуживания важным ялвяется организация работы Сервисной службы.

### Поддерживающие домены и ИИ

Выше было подсвечено что "**ИИ-сервисы**" является кросс-функциональным доменом между бизнесом и технологиями. С точки зрения бизнеса он является одним из ключевых для создания конкуррентного приемущества. С точки зрения используемых технологий и подходов он сильно выделяется на фоне остальных, поэтому "смешивать" его с какими-то другими доменами нецелесообразно. Кроме того этот домен может стать отдельным продуктом продаваемым во вне. Например, компания может решить, что ценные инсайты порождаемые ИИ могут быть интересны внешним партнёрам. Возможно обернуть ИИ-сервисы в SaaS модель и организовать доступ по подписке.

**MDM** домен с матер-данными - это как "клей" между остальными доменами, где требуется доступ к качественным проверенным справочным данным. Домен обеспечивает согласованное хранение и управление эталонными записями. Все домены получают мастер-данные из единого источника через API или событийную шину. Возьмём к примеру описание услуг. Состав каждой услуги должен быть одинаково описан как для пациентов, так и для врачей, которые передают информацию об услуге в страховую для согласования покрытия расходов. Если из-за отличий в описании окажется, что страховая не может возместить клиенту часть услуги, то клиент может потерять доверия и разочароваться, что в свою очередь приведёт к репутационым потерям в случае регулярности подобных случаев.

Также **MDM** как "Единый источник правды" позволяет быстрее интегрировать системы новых купленных компаний. Системы новой компании достаточно интегрировать с централизованным хранилищем. Это сокращает сроки интеграции.

Наличие **MDM** позволяет проще организовывать соблюдение регуляторных требований т.к. минимизировано дублирование данных, в частности есть единый профиль клиента.

Ну и дополнительно про **MDM** можно отметить что централизация используемых всеми данных (пациенты, справочники) упрощает организацию управления доступом к этим данными. Можно отслеживать кто и почему запросил данные.

Теперь поговорим о домене **Платформа данных и внутренняя интеграция**. Главным обоснованием его выделения является то, что фактически он является потребителем данных остальных доменов и НЕ должен влиять на операционные домены. Его развитие должно идти своим темпом, независимо от изменений в источниках. По своей сути Платформа данных - это своего рода Инфраструктура доступная всем бизнес пользователям. То же можно сказать и про **интеграционный слой** доставки данных в **Платформу**. Он не относится к какому то бизнес домену, а выстраивается отдельно на базе универсальных принципов и стандартов. Для интеграционного слоя важно единобразие подходов при его использовании другими доменами. Единобразие позволяет с меньшими издержками интегрировать новые домены чтобы их данные быстрее попадали в аналитику и учитывались бизнесом для принятие важных решений.
